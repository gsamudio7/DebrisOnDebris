---
title: "Debris Collision in Space Analysis"
author: "[Team Hulk](mailto:gsamudio7@gmail.com)"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  html_document:
    css: assets/css/html_report.css
    highlight: haddock
    self_contained: yes
    toc: yes
    toc_float: yes
    toc_depth: 1
---



<style>
#nav_logo {
  width: 100%;
}

#TOC {
  margin-top: 10.5px;
}

</style>

<br>

<center>
![](assets/MIT-Orbit-Debris_0.jpeg)
</center>

<br>

```{r setUp, include=FALSE}
knitr::opts_chunk$set(
  cache=FALSE,
  message=FALSE,
  warning=FALSE,
  out.width="100%",
  fig.cap=TRUE,
  fig.align="center",
  class.source="chunk"
)

library(data.table)
library(dplyr)
library(plotly)
library(RColorBrewer)

# Read in trimmed data
events <- fread("data/events.csv")

```

# EXSUM
In development

# Introduction
In development

# Exploratory Data Analysis {.tabset .tabset-fade}
Words

```{r processing, echo=FALSE}
# Summarize conjunction events of concern for each FragNum
concernSummary <- rbindlist(list(
  
  # PcBest
  events[!is.na(PcBest),
    .(bool=time2TCA==min(time2TCA) & time2TCA < 1,
      fragNum="PcBest",
      Pc_min=PcBest),
    by=eventNumber][bool==TRUE,!"bool"],
  
  # PcFrag10
  events[!is.na(PcFrag10),
   .(bool=time2TCA==min(time2TCA) & time2TCA < 1,
     fragNum="PcFrag10",
     Pc_min=PcFrag10),
   by=eventNumber][bool==TRUE,!"bool"],
  
  # PcFrag100
  events[!is.na(PcFrag100),
   .(bool=time2TCA==min(time2TCA) & time2TCA < 1,
     fragNum="PcFrag100",
     Pc_min=PcFrag100),
   by=eventNumber][bool==TRUE,!"bool"],
  
  # PcFrag1000
  events[!is.na(PcFrag1000),
   .(bool=time2TCA==min(time2TCA) & time2TCA < 1,
     fragNum="PcFrag1000",
     Pc_min=PcFrag1000),
   by=eventNumber][bool==TRUE,!"bool"],
  
  # PcFrag10000
  events[!is.na(PcFrag10000),
   .(bool=time2TCA==min(time2TCA) & time2TCA < 1,
     fragNum="PcFrag10000",
     Pc_min=PcFrag10000),
   by=eventNumber][bool==TRUE,!"bool"]
))

concernSummary[,"fragNum" := as.factor(fragNum)]
concernSummary[,"Pc_min" := as.double(Pc_min)]
```

### How many conjunction events have 0 Probability of Collision within a day of TCA?
```{r EDA1, echo=FALSE}
# How many are 0?
zeroCount <- merge(
  concernSummary[Pc_min==0,.(Zero_count=.N),by=fragNum],
  concernSummary[,.(Total=.N),by=fragNum],
  by="fragNum")
zeroCount[,"Proportion" := Zero_count/Total]
zeroCount <- zeroCount[,!"Total"]
zeroCount
```
Results explanation


### How many events of concern if the threshold is 1e-5?
```{r EDA2, echo=FALSE}
# How many concern events at varying frag numbers values?
concernCount <- merge(
  concernSummary[Pc_min >= 1e-5,.(Concern_Event_Count=.N),by=fragNum],
  concernSummary[,.(Total=.N),by=fragNum]
)
concernCount[,"Proportion" := Concern_Event_Count/Total]
concernCount # Frag 10000 has no concern events

```

Results explanation

## Pc within One Day to TCA

```{r eda_plot1, echo=FALSE, fig.cap="<b>Figure 1: </b>Collision Probability within One Day of TCA"}
load("products/Pc_at_1_day.RData")
Pc_at_1_day
```
Results explanation.


## Pc over Time

```{r eda_plot2, echo=FALSE, fig.cap="<b>Figure 2: </b>Collision Probability as TCA Varies"}
load("products/Pc_by_TCA_plot.RData")
Pc_by_TCA_plot
```
Results explanation.


## FNR and FPR Tradeoff

```{r eda_plot3, echo=FALSE, fig.cap="<b>Figure 3: </b>Confusion Rates Analysis"}
load("products/concernRates.RData")
concernRates
```
Results explanation.

# Conclusion